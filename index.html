<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Snake</title>
</head>
<body style="background:black; text-align:center; color:white; font-family:Arial;">

<h2>ğŸ Manzanas: <span id="score">0</span></h2>
<h2>ğŸ† RÃ©cord: <span id="highscore">0</span></h2>

<canvas id="c" width="400" height="400" style="background:#111"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");
const scoreEl = document.getElementById("score");
const highscoreEl = document.getElementById("highscore");

let box = 20;
let snake = [{x:200,y:200}];
let dx = box;
let dy = 0;
let score = 0;

// âœ… Cargar rÃ©cord guardado
let highscore = localStorage.getItem("snakeHighScore") || 0;
highscoreEl.textContent = highscore;

let food = {
  x: Math.floor(Math.random()*20)*box,
  y: Math.floor(Math.random()*20)*box
};

document.addEventListener("keydown", e=>{
  if(e.key=="ArrowUp" && dy==0){dx=0;dy=-box;}
  if(e.key=="ArrowDown" && dy==0){dx=0;dy=box;}
  if(e.key=="ArrowLeft" && dx==0){dx=-box;dy=0;}
  if(e.key=="ArrowRight" && dx==0){dx=box;dy=0;}
});

function game(){
  ctx.clearRect(0,0,400,400);

  // comida
  ctx.fillStyle="red";
  ctx.fillRect(food.x,food.y,box,box);

  // serpiente
  ctx.fillStyle="lime";
  snake.forEach(s=>ctx.fillRect(s.x,s.y,box,box));

  let head={x:snake[0].x+dx,y:snake[0].y+dy};

  if(head.x==food.x && head.y==food.y){
    score++;
    scoreEl.textContent = score;
    food={
      x:Math.floor(Math.random()*20)*box,
      y:Math.floor(Math.random()*20)*box
    };
  } else {
    snake.pop();
  }

  // colisiones
  if(head.x<0||head.y<0||head.x>=400||head.y>=400||
     snake.some(s=>s.x==head.x&&s.y==head.y)){
    alert("Game Over ğŸ˜¢\nManzanas comidas: " + score);
    
    // âœ… Actualizar rÃ©cord
    if(score > highscore){
      highscore = score;
      localStorage.setItem("snakeHighScore", highscore);
      highscoreEl.textContent = highscore;
      alert("ğŸ‰ Â¡Nuevo rÃ©cord!");
    }

    snake=[{x:200,y:200}];
    dx=box; dy=0;
    score=0;
    scoreEl.textContent = score;
    return;
  }

  snake.unshift(head);
}

setInterval(game,150);
</script>

</body>
</html>
